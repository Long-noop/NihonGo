<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./asserts/styles.css" />
    <title>Flashcard Tá»« Vá»±ng - JLPT N3</title>
    <style>
      :root {
        --font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        --front-gradient: linear-gradient(135deg, #ffffff 0%, #f5f7fa 100%);
        --back-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --btn-accent: #667eea;
        --pattern-color: #667eea;
        --home-btn-bg: green;
        --home-btn-bg-hover: greenyellow;
      }

      /* small grammar-specific tweaks */
      .card-front h2 {
        font-size: 3em;
      }

      .card-back h3 {
        font-size: 1.8em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ“š Flashcard Tá»« Vá»±ng</h1>
        <span class="type-badge" id="typeBadge">Táº¥t cáº£</span>
        <p id="subtitle">100 tá»« vá»±ng JLPT N3</p>
      </div>

      <div class="card-container">
        <div class="flashcard" id="flashcard">
          <div class="card-face card-front">
            <h2 id="word">æ¸‡ãï¼ˆã‹ã‚ãï¼‰</h2>
          </div>
          <div class="card-face card-back">
            <h3 id="meaning">KhÃ¡t nÆ°á»›c</h3>
          </div>
        </div>
      </div>

      <div class="controls">
        <button class="btn btn-prev" onclick="previousCard()">â—€ TrÆ°á»›c</button>
        <button class="btn btn-flip" onclick="flipCard()">ğŸ”„ Láº­t</button>
        <button class="btn btn-next" onclick="nextCard()">Sau â–¶</button>
        <button class="btn btn-home" onclick="goHome()">ğŸ  Trang chá»§</button>
      </div>

      <div class="progress">
        <div class="bar">
          <span id="current-card">1</span> / <span id="total-cards">100</span>
        </div>
      </div>

      <div class="flip-hint">
        ğŸ’¡ Nháº¥p vÃ o tháº» hoáº·c nháº¥n Spacebar Ä‘á»ƒ láº­t | â† â†’ Ä‘á»ƒ chuyá»ƒn tháº»
      </div>
    </div>

    <a href="index.html" class="home-btn">ğŸ  Home</a>

    <script src="./data/vocab.js"></script>
    <script>
      let currentVocab = [];
      let currentIndex = 0;
      let currentType = "all";

      // Láº¥y type tá»« URL
      function getTypeFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get("type") || "all";
      }

      // TÃªn tiáº¿ng Viá»‡t cho tá»«ng loáº¡i
      const typeNames = {
        verb: "Äá»™ng tá»«",
        noun: "Danh tá»«",
        adj: "TÃ­nh tá»«",
        adv: "Tráº¡ng tá»«",
        all: "Táº¥t cáº£",
      };

      // Load dá»¯ liá»‡u theo type
      function loadVocabByType() {
        currentType = getTypeFromURL();

        // Lá»c tá»« vá»±ng theo type
        if (currentType === "all") {
          currentVocab = [...vocabData];
        } else {
          currentVocab = vocabData.filter((v) => v.type === currentType);
        }

        // Cáº­p nháº­t UI
        updateTypeDisplay();
        updateCard();
      }

      // Cáº­p nháº­t hiá»ƒn thá»‹ loáº¡i tá»«
      function updateTypeDisplay() {
        const badge = document.getElementById("typeBadge");
        const subtitle = document.getElementById("subtitle");

        badge.className = `type-badge type-${currentType}`;
        badge.textContent = typeNames[currentType];
        subtitle.textContent = `${currentVocab.length} tá»« vá»±ng JLPT N3`;

        document.getElementById("total-cards").textContent =
          currentVocab.length;
      }

      // Cáº­p nháº­t tháº»
      function updateCard() {
        if (currentVocab.length === 0) {
          alert("KhÃ´ng cÃ³ dá»¯ liá»‡u tá»« vá»±ng!");
          return;
        }

        const card = currentVocab[currentIndex];
        document.getElementById("word").textContent = card.word;
        document.getElementById("meaning").textContent = card.meaning;
        document.getElementById("current-card").textContent = currentIndex + 1;

        // Reset flip
        document.getElementById("flashcard").classList.remove("flipped");
      }

      // Láº­t tháº»
      function flipCard() {
        document.getElementById("flashcard").classList.toggle("flipped");
      }

      // Tháº» tiáº¿p theo
      function nextCard() {
        currentIndex = (currentIndex + 1) % currentVocab.length;
        updateCard();
      }

      // Tháº» trÆ°á»›c
      function previousCard() {
        currentIndex =
          (currentIndex - 1 + currentVocab.length) % currentVocab.length;
        updateCard();
      }

      // Vá» trang chá»§
      function goHome() {
        window.location.href = "index.html";
      }

      // Click to flip
      document.getElementById("flashcard").addEventListener("click", flipCard);

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.key === " " || e.key === "Spacebar") {
          e.preventDefault();
          flipCard();
        } else if (e.key === "ArrowLeft") {
          previousCard();
        } else if (e.key === "ArrowRight") {
          nextCard();
        } else if (e.key === "Escape") {
          goHome();
        }
      });

      // Load data khi trang má»Ÿ
      loadVocabByType();
    </script>
  </body>
</html>
